// ============================================
// MY-SHOP-FRONT Enhanced Database Schema
// í”„ë¡ íŠ¸ì—”ë“œ í™”ë©´ ê¸°ë°˜ ë³´ê°•ëœ ERD
// ============================================

// ============================================
// ğŸ” ì‚¬ìš©ì ê´€ë ¨ í…Œì´ë¸”
// ============================================

Table USER as U {
  SEQ integer [primary key, increment]
  LOGIN_ID varchar2 [not null, unique, note: "ìœ ì € ì•„ì´ë””"]
  PASSWORD varchar2 [not null, note: "ìœ ì € ë¹„ë²ˆ (BCrypt ì•”í˜¸í™”)"]
  NAME varchar2 [not null, note: "ìœ ì € ì´ë¦„"]
  EMAIL varchar2 [unique, note: "ì´ë©”ì¼ (ë¡œê·¸ì¸/ì•Œë¦¼ìš©)"]  // âœ… ì¶”ê°€
  PHONE varchar2 [note: "ì „í™”ë²ˆí˜¸"]  // âœ… ì¶”ê°€
  PROFILE_IMAGE_URL varchar2 [note: "í”„ë¡œí•„ ì´ë¯¸ì§€ URL"]  // âœ… ì¶”ê°€
  ROLE varchar2 [not null, default: "BUYER", note: "BUYER, SELLER, ADMIN"]
  STATUS varchar2 [not null, default: "ACTIVE", note: "ACTIVE, INACTIVE, SUSPENDED"]  // âœ… ì¶”ê°€
  LAST_LOGIN_AT timestamp [note: "ë§ˆì§€ë§‰ ë¡œê·¸ì¸ ì¼ì‹œ"]  // âœ… ì¶”ê°€
  CREATED_AT timestamp [not null, default: `now()`, note: "ìƒì„±ì¼"]
  CREATED_BY integer [not null, note: "ìƒì„±ì"]
  UPDATED_AT timestamp [default: `now()`, note: "ìˆ˜ì •ì¼"]
  UPDATED_BY integer [note: "ìˆ˜ì •ì"]
}

Table USER_SOCIAL_ACCOUNTS {
  SEQ integer [primary key, increment]
  USER_SEQ integer [ref: > U.SEQ, note: "ìœ ì € SEQ"]
  PROVIDER varchar2 [not null, note: "KAKAO, NAVER, GOOGLE..."]
  PROVIDER_USER_ID varchar2 [not null, note: "ì†Œì…œì—ì„œ ì œê³µí•´ì£¼ëŠ” ID"]
  EMAIL varchar2 [note: "ì†Œì…œì—ì„œ ì œê³µí•˜ë©´ ì €ì¥"]
  ACCESS_TOKEN varchar2 [note: "ì†Œì…œì—ì„œ ì œê³µí•˜ëŠ” í† í°"]
  REFRESH_TOKEN varchar2 [note: "ì†Œì…œì—ì„œ ì œê³µí•˜ëŠ” ë¦¬í”„ë ˆì‹œ í† í°"]
  TOKEN_EXPIRES_AT timestamp
  CREATED_AT timestamp [not null, default: `now()`, note: "ìƒì„±ì¼"]  // âœ… ì¶”ê°€
  CREATED_BY integer [not null, note: "ìƒì„±ì"]  // âœ… ì¶”ê°€
  UPDATED_AT timestamp [default: `now()`, note: "ìˆ˜ì •ì¼"]  // âœ… ì¶”ê°€
  UPDATED_BY integer [note: "ìˆ˜ì •ì"]

  indexes {
    (PROVIDER, PROVIDER_USER_ID) [unique]  // âœ… ë³µí•© ìœ ë‹ˆí¬ ì¸ë±ìŠ¤
  }
}

// âœ… ì‹ ê·œ: ë°°ì†¡ì§€ ê´€ë¦¬ í…Œì´ë¸”
Table SHIPPING_ADDRESSES {
  SEQ integer [primary key, increment]
  USER_SEQ integer [not null, ref: > U.SEQ, note: "ìœ ì € SEQ"]
  ADDRESS_NAME varchar2 [not null, note: "ë°°ì†¡ì§€ëª… (ì˜ˆ: ì§‘, íšŒì‚¬)"]
  RECEIVER_NAME varchar2 [not null, note: "ìˆ˜ë ¹ì¸"]
  RECEIVER_PHONE varchar2 [not null, note: "ìˆ˜ë ¹ì¸ ì—°ë½ì²˜"]
  ZIP_CODE varchar2 [not null, note: "ìš°í¸ë²ˆí˜¸"]
  ADDRESS1 varchar2 [not null, note: "ê¸°ë³¸ ì£¼ì†Œ"]
  ADDRESS2 varchar2 [note: "ìƒì„¸ ì£¼ì†Œ"]
  IS_DEFAULT char(1) [not null, default: "N", note: "ê¸°ë³¸ ë°°ì†¡ì§€ ì—¬ë¶€ (Y/N)"]
  CREATED_AT timestamp [not null, default: `now()`, note: "ìƒì„±ì¼"]
  CREATED_BY integer [not null, note: "ìƒì„±ì"]
  UPDATED_AT timestamp [default: `now()`, note: "ìˆ˜ì •ì¼"]
  UPDATED_BY integer [note: "ìˆ˜ì •ì"]
}


// ============================================
// ğŸª ë§ˆì¼“ ê´€ë ¨ í…Œì´ë¸”
// ============================================

Table MARKETS as M {
  SEQ integer [primary key, increment]
  OWNER_USER_SEQ integer [not null, ref: > U.SEQ, note: "ë§ˆì¼“ ì†Œìœ ì(íŒë§¤ì) ìœ ì € SEQ"]
  MARKET_NAME varchar2 [not null, note: "ë§ˆì¼“ëª…"]
  MARKET_SLUG varchar2 [not null, unique, note: "ë§ˆì¼“ ì‹ë³„ì(URLìš©)"]
  DESCRIPTION varchar2 [note: "ë§ˆì¼“ ì†Œê°œ"]
  LOGO_IMAGE_URL varchar2 [note: "ë§ˆì¼“ ë¡œê³  ì´ë¯¸ì§€"]  // âœ… ì¶”ê°€
  BANNER_IMAGE_URL varchar2 [note: "ë§ˆì¼“ ë°°ë„ˆ ì´ë¯¸ì§€"]  // âœ… ì¶”ê°€
  BUSINESS_NUMBER varchar2 [note: "ì‚¬ì—…ì ë“±ë¡ë²ˆí˜¸"]  // âœ… ì¶”ê°€
  BANK_NAME varchar2 [note: "ì •ì‚° ì€í–‰ëª…"]  // âœ… ì¶”ê°€
  BANK_ACCOUNT varchar2 [note: "ì •ì‚° ê³„ì¢Œë²ˆí˜¸"]  // âœ… ì¶”ê°€
  BANK_HOLDER varchar2 [note: "ì˜ˆê¸ˆì£¼"]  // âœ… ì¶”ê°€
  FEE_RATE decimal(5,2) [not null, default: 3.00, note: "ìˆ˜ìˆ˜ë£Œìœ¨ (%)"]  // âœ… ì¶”ê°€
  STATUS varchar2 [not null, default: "ACTIVE", note: "ACTIVE, INACTIVE, SUSPENDED"]
  CREATED_AT timestamp [not null, default: `now()`, note: "ìƒì„±ì¼"]
  CREATED_BY integer [not null, note: "ìƒì„±ì"]
  UPDATED_AT timestamp [default: `now()`, note: "ìˆ˜ì •ì¼"]
  UPDATED_BY integer [note: "ìˆ˜ì •ì"]
}


// ============================================
// ğŸ“¦ ìƒí’ˆ ê´€ë ¨ í…Œì´ë¸”
// ============================================

// âœ… ì‹ ê·œ: ì¹´í…Œê³ ë¦¬ í…Œì´ë¸”
Table CATEGORIES as CAT {
  SEQ integer [primary key, increment]
  PARENT_SEQ integer [ref: > CAT.SEQ, note: "ìƒìœ„ ì¹´í…Œê³ ë¦¬ SEQ (NULLì´ë©´ ëŒ€ë¶„ë¥˜)"]
  CATEGORY_NAME varchar2 [not null, note: "ì¹´í…Œê³ ë¦¬ëª…"]
  CATEGORY_SLUG varchar2 [not null, unique, note: "ì¹´í…Œê³ ë¦¬ ì‹ë³„ì(URLìš©)"]
  ICON_NAME varchar2 [note: "ì•„ì´ì½˜ëª… (ì˜ˆ: fa-couch)"]
  DISPLAY_ORDER integer [not null, default: 0, note: "í‘œì‹œ ìˆœì„œ"]
  IS_ACTIVE char(1) [not null, default: "Y", note: "í™œì„± ì—¬ë¶€ (Y/N)"]
  CREATED_AT timestamp [not null, default: `now()`, note: "ìƒì„±ì¼"]
  CREATED_BY integer [not null, note: "ìƒì„±ì"]
  UPDATED_AT timestamp [default: `now()`, note: "ìˆ˜ì •ì¼"]
  UPDATED_BY integer [note: "ìˆ˜ì •ì"]
}

Table PRODUCTS as P {
  SEQ integer [primary key, increment]
  MARKET_SEQ integer [not null, ref: > M.SEQ, note: "ë§ˆì¼“ SEQ"]
  CATEGORY_SEQ integer [ref: > CAT.SEQ, note: "ì¹´í…Œê³ ë¦¬ SEQ"]  // âœ… ì¶”ê°€
  PRODUCT_NAME varchar2 [not null, note: "ìƒí’ˆëª…"]
  BRAND varchar2 [note: "ë¸Œëœë“œëª…"]  // âœ… ì¶”ê°€
  DESCRIPTION varchar2 [note: "ìƒí’ˆ ì„¤ëª…"]
  ORIGINAL_PRICE integer [not null, note: "ì›ê°€(ì›)"]  // âœ… ì¶”ê°€
  PRICE integer [not null, note: "íŒë§¤ê°€(ì›)"]
  DISCOUNT_RATE integer [default: 0, note: "í• ì¸ìœ¨ (%)"]  // âœ… ì¶”ê°€
  STOCK_QTY integer [not null, default: 0, note: "ì¬ê³  ìˆ˜ëŸ‰"]
  STATUS varchar2 [not null, default: "ON_SALE", note: "ON_SALE, SOLD_OUT, HIDDEN"]
  THUMBNAIL_URL varchar2 [note: "ëŒ€í‘œ ì´ë¯¸ì§€ URL"]
  IS_FREE_SHIPPING char(1) [not null, default: "N", note: "ë¬´ë£Œë°°ì†¡ ì—¬ë¶€ (Y/N)"]  // âœ… ì¶”ê°€
  IS_FAST_DELIVERY char(1) [not null, default: "N", note: "ë¹ ë¥¸ë°°ì†¡ ì—¬ë¶€ (Y/N)"]  // âœ… ì¶”ê°€
  SHIPPING_FEE integer [default: 0, note: "ê¸°ë³¸ ë°°ì†¡ë¹„(ì›)"]  // âœ… ì¶”ê°€
  VIEW_COUNT integer [not null, default: 0, note: "ì¡°íšŒìˆ˜"]  // âœ… ì¶”ê°€
  REVIEW_COUNT integer [not null, default: 0, note: "ë¦¬ë·° ìˆ˜ (ë¹„ì •ê·œí™”)"]  // âœ… ì¶”ê°€
  RATING_AVG decimal(2,1) [default: 0.0, note: "í‰ê·  í‰ì  (ë¹„ì •ê·œí™”)"]  // âœ… ì¶”ê°€
  CREATED_AT timestamp [not null, default: `now()`, note: "ìƒì„±ì¼"]
  CREATED_BY integer [not null, note: "ìƒì„±ì"]
  UPDATED_AT timestamp [default: `now()`, note: "ìˆ˜ì •ì¼"]
  UPDATED_BY integer [note: "ìˆ˜ì •ì"]
}

// âœ… ì‹ ê·œ: ìƒí’ˆ ì´ë¯¸ì§€ í…Œì´ë¸” (ë‹¤ì¤‘ ì´ë¯¸ì§€ ì§€ì›)
Table PRODUCT_IMAGES {
  SEQ integer [primary key, increment]
  PRODUCT_SEQ integer [not null, ref: > P.SEQ, note: "ìƒí’ˆ SEQ"]
  IMAGE_URL varchar2 [not null, note: "ì´ë¯¸ì§€ URL"]
  IMAGE_TYPE varchar2 [not null, default: "DETAIL", note: "THUMBNAIL, DETAIL, DESCRIPTION"]
  DISPLAY_ORDER integer [not null, default: 0, note: "í‘œì‹œ ìˆœì„œ"]
  CREATED_AT timestamp [not null, default: `now()`, note: "ìƒì„±ì¼"]
  CREATED_BY integer [not null, note: "ìƒì„±ì"]
}

// ìƒí’ˆ ì˜µì…˜
Table PRODUCT_OPTIONS {
  SEQ integer [primary key, increment]
  PRODUCT_SEQ integer [not null, ref: > P.SEQ, note: "ìƒí’ˆ SEQ"]
  OPTION_NAME varchar2 [not null, note: "ì˜µì…˜ëª… (ì˜ˆ: ìƒ‰ìƒ/ì‚¬ì´ì¦ˆ)"]
  OPTION_VALUE varchar2 [not null, note: "ì˜µì…˜ê°’ (ì˜ˆ: ë¸”ë™/M)"]
  ADDITIONAL_PRICE integer [not null, default: 0, note: "ì¶”ê°€ ê¸ˆì•¡(ì›)"]
  STOCK_QTY integer [not null, default: 0, note: "ì˜µì…˜ ì¬ê³ "]
  STATUS varchar2 [not null, default: "ACTIVE", note: "ACTIVE, INACTIVE"]
  CREATED_AT timestamp [not null, default: `now()`, note: "ìƒì„±ì¼"]
  CREATED_BY integer [not null, note: "ìƒì„±ì"]
  UPDATED_AT timestamp [default: `now()`, note: "ìˆ˜ì •ì¼"]
  UPDATED_BY integer [note: "ìˆ˜ì •ì"]
}


// ============================================
// â­ ë¦¬ë·° & ìœ„ì‹œë¦¬ìŠ¤íŠ¸ í…Œì´ë¸”
// ============================================

// âœ… ì‹ ê·œ: ìƒí’ˆ ë¦¬ë·° í…Œì´ë¸”
Table REVIEWS {
  SEQ integer [primary key, increment]
  PRODUCT_SEQ integer [not null, ref: > P.SEQ, note: "ìƒí’ˆ SEQ"]
  ORDER_ITEM_SEQ integer [ref: > ORDER_ITEMS.SEQ, note: "ì£¼ë¬¸ ì•„ì´í…œ SEQ (êµ¬ë§¤ ì¸ì¦)"]
  USER_SEQ integer [not null, ref: > U.SEQ, note: "ì‘ì„±ì ìœ ì € SEQ"]
  RATING integer [not null, note: "í‰ì  (1~5)"]
  CONTENT varchar2 [note: "ë¦¬ë·° ë‚´ìš©"]
  IS_PHOTO_REVIEW char(1) [not null, default: "N", note: "í¬í† ë¦¬ë·° ì—¬ë¶€ (Y/N)"]
  HELPFUL_COUNT integer [not null, default: 0, note: "ë„ì›€ë¨ ìˆ˜"]
  STATUS varchar2 [not null, default: "VISIBLE", note: "VISIBLE, HIDDEN, DELETED"]
  CREATED_AT timestamp [not null, default: `now()`, note: "ìƒì„±ì¼"]
  CREATED_BY integer [not null, note: "ìƒì„±ì"]
  UPDATED_AT timestamp [default: `now()`, note: "ìˆ˜ì •ì¼"]
  UPDATED_BY integer [note: "ìˆ˜ì •ì"]
}

// âœ… ì‹ ê·œ: ë¦¬ë·° ì´ë¯¸ì§€ í…Œì´ë¸”
Table REVIEW_IMAGES {
  SEQ integer [primary key, increment]
  REVIEW_SEQ integer [not null, ref: > REVIEWS.SEQ, note: "ë¦¬ë·° SEQ"]
  IMAGE_URL varchar2 [not null, note: "ì´ë¯¸ì§€ URL"]
  DISPLAY_ORDER integer [not null, default: 0, note: "í‘œì‹œ ìˆœì„œ"]
  CREATED_AT timestamp [not null, default: `now()`, note: "ìƒì„±ì¼"]
  CREATED_BY integer [not null, note: "ìƒì„±ì"]
}

// âœ… ì‹ ê·œ: ìœ„ì‹œë¦¬ìŠ¤íŠ¸(ì°œ) í…Œì´ë¸”
Table WISHLISTS {
  SEQ integer [primary key, increment]
  USER_SEQ integer [not null, ref: > U.SEQ, note: "ìœ ì € SEQ"]
  PRODUCT_SEQ integer [not null, ref: > P.SEQ, note: "ìƒí’ˆ SEQ"]
  CREATED_AT timestamp [not null, default: `now()`, note: "ìƒì„±ì¼"]

  indexes {
    (USER_SEQ, PRODUCT_SEQ) [unique]  // ì¤‘ë³µ ì°œ ë°©ì§€
  }
}


// ============================================
// ğŸ›’ ì¥ë°”êµ¬ë‹ˆ í…Œì´ë¸”
// ============================================

// âœ… ì‹ ê·œ: ì¥ë°”êµ¬ë‹ˆ í…Œì´ë¸”
Table CARTS {
  SEQ integer [primary key, increment]
  USER_SEQ integer [not null, ref: > U.SEQ, note: "ìœ ì € SEQ"]
  CREATED_AT timestamp [not null, default: `now()`, note: "ìƒì„±ì¼"]
  UPDATED_AT timestamp [default: `now()`, note: "ìˆ˜ì •ì¼"]

  indexes {
    USER_SEQ [unique]  // ìœ ì €ë‹¹ 1ê°œì˜ ì¥ë°”êµ¬ë‹ˆ
  }
}

// âœ… ì‹ ê·œ: ì¥ë°”êµ¬ë‹ˆ ì•„ì´í…œ í…Œì´ë¸”
Table CART_ITEMS {
  SEQ integer [primary key, increment]
  CART_SEQ integer [not null, ref: > CARTS.SEQ, note: "ì¥ë°”êµ¬ë‹ˆ SEQ"]
  PRODUCT_SEQ integer [not null, ref: > P.SEQ, note: "ìƒí’ˆ SEQ"]
  PRODUCT_OPTION_SEQ integer [ref: > PRODUCT_OPTIONS.SEQ, note: "ì˜µì…˜ SEQ (ì—†ìœ¼ë©´ NULL)"]
  QTY integer [not null, default: 1, note: "ìˆ˜ëŸ‰"]
  IS_SELECTED char(1) [not null, default: "Y", note: "ì„ íƒ ì—¬ë¶€ (Y/N)"]
  CREATED_AT timestamp [not null, default: `now()`, note: "ìƒì„±ì¼"]
  UPDATED_AT timestamp [default: `now()`, note: "ìˆ˜ì •ì¼"]

  indexes {
    (CART_SEQ, PRODUCT_SEQ, PRODUCT_OPTION_SEQ) [unique]  // ì¤‘ë³µ ë°©ì§€
  }
}


// ============================================
// ğŸ§¾ ì£¼ë¬¸ / ê²°ì œ í…Œì´ë¸”
// ============================================

Table ORDERS as O {
  SEQ integer [primary key, increment]
  MARKET_SEQ integer [not null, ref: > M.SEQ, note: "ë§ˆì¼“ SEQ"]
  BUYER_USER_SEQ integer [ref: > U.SEQ, note: "êµ¬ë§¤ì ìœ ì € SEQ(ë¹„íšŒì›ì´ë©´ NULL ê°€ëŠ¥)"]
  ORDER_NO varchar2 [not null, unique, note: "ì£¼ë¬¸ë²ˆí˜¸"]
  ORDER_STATUS varchar2 [not null, default: "PLACED", note: "PLACED, PAID, PREPARING, SHIPPED, DELIVERED, CANCELED, REFUNDED"]
  TOTAL_PRODUCT_AMOUNT integer [not null, note: "ìƒí’ˆ í•©ê³„(ì›)"]
  TOTAL_DISCOUNT_AMOUNT integer [not null, default: 0, note: "í• ì¸ í•©ê³„(ì›)"]
  COUPON_DISCOUNT_AMOUNT integer [not null, default: 0, note: "ì¿ í° í• ì¸(ì›)"]  // âœ… ì¶”ê°€
  SHIPPING_FEE integer [not null, default: 0, note: "ë°°ì†¡ë¹„(ì›)"]
  TOTAL_PAY_AMOUNT integer [not null, note: "ê²°ì œ ìš”ì²­ ê¸ˆì•¡(ì›)"]
  RECEIVER_NAME varchar2 [not null, note: "ìˆ˜ë ¹ì¸"]
  RECEIVER_PHONE varchar2 [not null, note: "ìˆ˜ë ¹ì¸ ì—°ë½ì²˜"]
  ZIP_CODE varchar2 [note: "ìš°í¸ë²ˆí˜¸"]
  ADDRESS1 varchar2 [note: "ì£¼ì†Œ1"]
  ADDRESS2 varchar2 [note: "ì£¼ì†Œ2"]
  DELIVERY_MESSAGE varchar2 [note: "ë°°ì†¡ ë©”ëª¨"]  // âœ… ì¶”ê°€
  TRACKING_NUMBER varchar2 [note: "ìš´ì†¡ì¥ ë²ˆí˜¸"]  // âœ… ì¶”ê°€
  SHIPPED_AT timestamp [note: "ë°°ì†¡ ì‹œì‘ì¼"]  // âœ… ì¶”ê°€
  DELIVERED_AT timestamp [note: "ë°°ì†¡ ì™„ë£Œì¼"]  // âœ… ì¶”ê°€
  CREATED_AT timestamp [not null, default: `now()`, note: "ìƒì„±ì¼"]
  CREATED_BY integer [not null, note: "ìƒì„±ì"]
  UPDATED_AT timestamp [default: `now()`, note: "ìˆ˜ì •ì¼"]
  UPDATED_BY integer [note: "ìˆ˜ì •ì"]
}

Table ORDER_ITEMS {
  SEQ integer [primary key, increment]
  ORDER_SEQ integer [not null, ref: > O.SEQ, note: "ì£¼ë¬¸ SEQ"]
  PRODUCT_SEQ integer [not null, ref: > P.SEQ, note: "ìƒí’ˆ SEQ"]
  PRODUCT_OPTION_SEQ integer [ref: > PRODUCT_OPTIONS.SEQ, note: "ì˜µì…˜ SEQ(ì—†ìœ¼ë©´ NULL)"]
  ITEM_NAME varchar2 [not null, note: "ì£¼ë¬¸ ì‹œì  ìƒí’ˆëª…(ìŠ¤ëƒ…ìƒ·)"]
  ITEM_OPTION varchar2 [note: "ì£¼ë¬¸ ì‹œì  ì˜µì…˜ í‘œì‹œ(ìŠ¤ëƒ…ìƒ·)"]
  ITEM_IMAGE_URL varchar2 [note: "ì£¼ë¬¸ ì‹œì  ìƒí’ˆ ì´ë¯¸ì§€(ìŠ¤ëƒ…ìƒ·)"]  // âœ… ì¶”ê°€
  UNIT_PRICE integer [not null, note: "ë‹¨ê°€(ì›)"]
  QTY integer [not null, note: "ìˆ˜ëŸ‰"]
  ITEM_AMOUNT integer [not null, note: "ì•„ì´í…œ ê¸ˆì•¡(ì›) = UNIT_PRICE * QTY"]
  ITEM_STATUS varchar2 [not null, default: "ORDERED", note: "ORDERED, CONFIRMED, CANCELED, RETURNED"]  // âœ… ì¶”ê°€
  CREATED_AT timestamp [not null, default: `now()`, note: "ìƒì„±ì¼"]
  CREATED_BY integer [not null, note: "ìƒì„±ì"]
  UPDATED_AT timestamp [default: `now()`, note: "ìˆ˜ì •ì¼"]
  UPDATED_BY integer [note: "ìˆ˜ì •ì"]
}

Table PAYMENTS as PAY {
  SEQ integer [primary key, increment]
  ORDER_SEQ integer [not null, ref: > O.SEQ, note: "ì£¼ë¬¸ SEQ"]
  PAY_METHOD varchar2 [not null, note: "CARD, VBANK, TRANSFER, KAKAO_PAY, NAVER_PAY, TOSS_PAY"]
  PAY_STATUS varchar2 [not null, default: "READY", note: "READY, SUCCESS, FAILED, CANCELED, REFUNDED"]
  PAY_AMOUNT integer [not null, note: "ê²°ì œ ê¸ˆì•¡(ì›)"]
  PG_PROVIDER varchar2 [note: "í† ìŠ¤/ë‚˜ì´ìŠ¤/ì´ë‹ˆì‹œìŠ¤ ë“±"]
  PG_TID varchar2 [note: "PG ê±°ë˜í‚¤/ê²°ì œí‚¤"]
  CARD_NAME varchar2 [note: "ì¹´ë“œì‚¬ëª…"]  // âœ… ì¶”ê°€
  CARD_NUMBER varchar2 [note: "ë§ˆìŠ¤í‚¹ëœ ì¹´ë“œë²ˆí˜¸"]  // âœ… ì¶”ê°€
  INSTALLMENT integer [default: 0, note: "í• ë¶€ ê°œì›” (0=ì¼ì‹œë¶ˆ)"]  // âœ… ì¶”ê°€
  RECEIPT_URL varchar2 [note: "ì˜ìˆ˜ì¦ URL"]  // âœ… ì¶”ê°€
  APPROVED_AT timestamp [note: "ìŠ¹ì¸ì¼ì‹œ"]
  CANCELED_AT timestamp [note: "ì·¨ì†Œì¼ì‹œ"]
  FAIL_REASON varchar2 [note: "ì‹¤íŒ¨ ì‚¬ìœ "]
  CREATED_AT timestamp [not null, default: `now()`, note: "ìƒì„±ì¼"]
  CREATED_BY integer [not null, note: "ìƒì„±ì"]
  UPDATED_AT timestamp [default: `now()`, note: "ìˆ˜ì •ì¼"]
  UPDATED_BY integer [note: "ìˆ˜ì •ì"]
}


// ============================================
// ğŸŸï¸ ì¿ í° í…Œì´ë¸”
// ============================================

// âœ… ì‹ ê·œ: ì¿ í° í…Œì´ë¸”
Table COUPONS {
  SEQ integer [primary key, increment]
  MARKET_SEQ integer [ref: > M.SEQ, note: "ë§ˆì¼“ SEQ (NULLì´ë©´ ì „ì²´ ë§ˆì¼“ ì ìš©)"]
  COUPON_NAME varchar2 [not null, note: "ì¿ í°ëª…"]
  COUPON_CODE varchar2 [not null, unique, note: "ì¿ í° ì½”ë“œ"]
  DISCOUNT_TYPE varchar2 [not null, note: "PERCENT, FIXED"]
  DISCOUNT_VALUE integer [not null, note: "í• ì¸ ê°’ (% ë˜ëŠ” ì›)"]
  MIN_ORDER_AMOUNT integer [default: 0, note: "ìµœì†Œ ì£¼ë¬¸ ê¸ˆì•¡(ì›)"]
  MAX_DISCOUNT_AMOUNT integer [note: "ìµœëŒ€ í• ì¸ ê¸ˆì•¡(ì›)"]
  TOTAL_QTY integer [note: "ì´ ë°œê¸‰ ìˆ˜ëŸ‰ (NULLì´ë©´ ë¬´ì œí•œ)"]
  ISSUED_QTY integer [not null, default: 0, note: "ë°œê¸‰ëœ ìˆ˜ëŸ‰"]
  VALID_FROM timestamp [not null, note: "ìœ íš¨ ì‹œì‘ì¼"]
  VALID_TO timestamp [not null, note: "ìœ íš¨ ì¢…ë£Œì¼"]
  STATUS varchar2 [not null, default: "ACTIVE", note: "ACTIVE, INACTIVE, EXPIRED"]
  CREATED_AT timestamp [not null, default: `now()`, note: "ìƒì„±ì¼"]
  CREATED_BY integer [not null, note: "ìƒì„±ì"]
  UPDATED_AT timestamp [default: `now()`, note: "ìˆ˜ì •ì¼"]
  UPDATED_BY integer [note: "ìˆ˜ì •ì"]
}

// âœ… ì‹ ê·œ: ìœ ì € ì¿ í° í…Œì´ë¸”
Table USER_COUPONS {
  SEQ integer [primary key, increment]
  USER_SEQ integer [not null, ref: > U.SEQ, note: "ìœ ì € SEQ"]
  COUPON_SEQ integer [not null, ref: > COUPONS.SEQ, note: "ì¿ í° SEQ"]
  ORDER_SEQ integer [ref: > O.SEQ, note: "ì‚¬ìš©ëœ ì£¼ë¬¸ SEQ"]
  STATUS varchar2 [not null, default: "ISSUED", note: "ISSUED, USED, EXPIRED"]
  ISSUED_AT timestamp [not null, default: `now()`, note: "ë°œê¸‰ì¼"]
  USED_AT timestamp [note: "ì‚¬ìš©ì¼"]
  EXPIRED_AT timestamp [note: "ë§Œë£Œì¼"]
}


// ============================================
// ğŸ’° ì •ì‚° í…Œì´ë¸”
// ============================================

Table SETTLEMENTS as S {
  SEQ integer [primary key, increment]
  MARKET_SEQ integer [not null, ref: > M.SEQ, note: "ë§ˆì¼“ SEQ"]
  SETTLEMENT_PERIOD_START timestamp [not null, note: "ì •ì‚° ì‹œì‘ì¼(í¬í•¨)"]
  SETTLEMENT_PERIOD_END timestamp [not null, note: "ì •ì‚° ì¢…ë£Œì¼(í¬í•¨)"]
  TOTAL_ORDER_COUNT integer [not null, default: 0, note: "ì´ ì£¼ë¬¸ ê±´ìˆ˜"]  // âœ… ì¶”ê°€
  TOTAL_PAY_AMOUNT integer [not null, note: "ê¸°ê°„ ë‚´ ê²°ì œ í•©ê³„(ì›)"]
  TOTAL_REFUND_AMOUNT integer [not null, default: 0, note: "í™˜ë¶ˆ í•©ê³„(ì›)"]
  FEE_RATE decimal(5,2) [not null, note: "ì ìš© ìˆ˜ìˆ˜ë£Œìœ¨ (%)"]  // âœ… ì¶”ê°€
  FEE_AMOUNT integer [not null, default: 0, note: "ìˆ˜ìˆ˜ë£Œ í•©ê³„(ì›)"]
  SETTLEMENT_AMOUNT integer [not null, note: "ì •ì‚° ê¸ˆì•¡(ì›) = (TOTAL_PAY - TOTAL_REFUND) - FEE"]
  STATUS varchar2 [not null, default: "READY", note: "READY, CONFIRMED, DONE"]
  CONFIRMED_AT timestamp [note: "í™•ì •ì¼ì‹œ"]
  SETTLED_AT timestamp [note: "ì •ì‚°ì™„ë£Œì¼ì‹œ"]
  BANK_NAME varchar2 [note: "ì •ì‚° ì€í–‰ëª… (ìŠ¤ëƒ…ìƒ·)"]  // âœ… ì¶”ê°€
  BANK_ACCOUNT varchar2 [note: "ì •ì‚° ê³„ì¢Œë²ˆí˜¸ (ìŠ¤ëƒ…ìƒ·)"]  // âœ… ì¶”ê°€
  BANK_HOLDER varchar2 [note: "ì˜ˆê¸ˆì£¼ (ìŠ¤ëƒ…ìƒ·)"]  // âœ… ì¶”ê°€
  CREATED_AT timestamp [not null, default: `now()`, note: "ìƒì„±ì¼"]
  CREATED_BY integer [not null, note: "ìƒì„±ì"]
  UPDATED_AT timestamp [default: `now()`, note: "ìˆ˜ì •ì¼"]
  UPDATED_BY integer [note: "ìˆ˜ì •ì"]
}

Table SETTLEMENT_ORDERS {
  SEQ integer [primary key, increment]
  SETTLEMENT_SEQ integer [not null, ref: > S.SEQ, note: "ì •ì‚° SEQ"]
  ORDER_SEQ integer [not null, ref: > O.SEQ, note: "ì£¼ë¬¸ SEQ"]
  PAY_AMOUNT integer [not null, note: "í•´ë‹¹ ì£¼ë¬¸ ê²°ì œê¸ˆì•¡(ì›)"]
  REFUND_AMOUNT integer [not null, default: 0, note: "í•´ë‹¹ ì£¼ë¬¸ í™˜ë¶ˆê¸ˆì•¡(ì›)"]
  FEE_AMOUNT integer [not null, default: 0, note: "í•´ë‹¹ ì£¼ë¬¸ ìˆ˜ìˆ˜ë£Œ(ì›)"]
  NET_AMOUNT integer [not null, note: "í•´ë‹¹ ì£¼ë¬¸ ì •ì‚°ê¸ˆì•¡(ì›)"]
  CREATED_AT timestamp [not null, default: `now()`, note: "ìƒì„±ì¼"]
  CREATED_BY integer [not null, note: "ìƒì„±ì"]
  UPDATED_AT timestamp [default: `now()`, note: "ìˆ˜ì •ì¼"]
  UPDATED_BY integer [note: "ìˆ˜ì •ì"]
}


// ============================================
// ğŸ¨ ë°°ë„ˆ / ì´ë²¤íŠ¸ í…Œì´ë¸”
// ============================================

// âœ… ì‹ ê·œ: ë°°ë„ˆ í…Œì´ë¸”
Table BANNERS {
  SEQ integer [primary key, increment]
  MARKET_SEQ integer [ref: > M.SEQ, note: "ë§ˆì¼“ SEQ (NULLì´ë©´ ì „ì²´ ë…¸ì¶œ)"]
  BANNER_TYPE varchar2 [not null, default: "MAIN", note: "MAIN, SUB, POPUP, EVENT"]
  TITLE varchar2 [not null, note: "ë°°ë„ˆ ì œëª©"]
  SUBTITLE varchar2 [note: "ë°°ë„ˆ ë¶€ì œëª©"]
  IMAGE_URL varchar2 [not null, note: "ë°°ë„ˆ ì´ë¯¸ì§€ URL"]
  LINK_URL varchar2 [note: "í´ë¦­ ì‹œ ì´ë™ URL"]
  BACKGROUND_COLOR varchar2 [default: "#35c5f0", note: "ë°°ê²½ìƒ‰ (HEX)"]
  TEXT_COLOR varchar2 [default: "#FFFFFF", note: "í…ìŠ¤íŠ¸ìƒ‰ (HEX)"]
  DISPLAY_ORDER integer [not null, default: 0, note: "í‘œì‹œ ìˆœì„œ"]
  VALID_FROM timestamp [note: "ë…¸ì¶œ ì‹œì‘ì¼"]
  VALID_TO timestamp [note: "ë…¸ì¶œ ì¢…ë£Œì¼"]
  IS_ACTIVE char(1) [not null, default: "Y", note: "í™œì„± ì—¬ë¶€ (Y/N)"]
  CLICK_COUNT integer [not null, default: 0, note: "í´ë¦­ ìˆ˜"]
  CREATED_AT timestamp [not null, default: `now()`, note: "ìƒì„±ì¼"]
  CREATED_BY integer [not null, note: "ìƒì„±ì"]
  UPDATED_AT timestamp [default: `now()`, note: "ìˆ˜ì •ì¼"]
  UPDATED_BY integer [note: "ìˆ˜ì •ì"]
}


// ============================================
// ğŸ”” ì•Œë¦¼ í…Œì´ë¸”
// ============================================

// âœ… ì‹ ê·œ: ì•Œë¦¼ í…Œì´ë¸”
Table NOTIFICATIONS {
  SEQ integer [primary key, increment]
  USER_SEQ integer [not null, ref: > U.SEQ, note: "ìœ ì € SEQ"]
  NOTIFICATION_TYPE varchar2 [not null, note: "ORDER, REVIEW, COUPON, SYSTEM, MARKETING"]
  TITLE varchar2 [not null, note: "ì•Œë¦¼ ì œëª©"]
  CONTENT varchar2 [not null, note: "ì•Œë¦¼ ë‚´ìš©"]
  LINK_URL varchar2 [note: "í´ë¦­ ì‹œ ì´ë™ URL"]
  IS_READ char(1) [not null, default: "N", note: "ì½ìŒ ì—¬ë¶€ (Y/N)"]
  READ_AT timestamp [note: "ì½ì€ ì‹œê°„"]
  CREATED_AT timestamp [not null, default: `now()`, note: "ìƒì„±ì¼"]
}


// ============================================
// ğŸ¤– AI ê¸°ëŠ¥ í…Œì´ë¸”
// ============================================

// âœ… ì‹ ê·œ: AI ìƒì„± ì½˜í…ì¸  í…Œì´ë¸”
Table AI_CONTENTS {
  SEQ integer [primary key, increment]
  MARKET_SEQ integer [ref: > M.SEQ, note: "ë§ˆì¼“ SEQ"]
  PRODUCT_SEQ integer [ref: > P.SEQ, note: "ìƒí’ˆ SEQ (ìƒí’ˆ ì„¤ëª… ìƒì„± ì‹œ)"]
  CONTENT_TYPE varchar2 [not null, note: "PRODUCT_DESC, MARKET_DESC, REVIEW_REPLY, CHATBOT"]
  PROMPT varchar2 [not null, note: "ì…ë ¥ í”„ë¡¬í”„íŠ¸"]
  GENERATED_CONTENT varchar2 [not null, note: "ìƒì„±ëœ ì½˜í…ì¸ "]
  AI_MODEL varchar2 [not null, note: "ì‚¬ìš©ëœ AI ëª¨ë¸ (GPT-4, Claude ë“±)"]
  TOKEN_USED integer [note: "ì‚¬ìš©ëœ í† í° ìˆ˜"]
  IS_APPLIED char(1) [not null, default: "N", note: "ì ìš© ì—¬ë¶€ (Y/N)"]
  CREATED_AT timestamp [not null, default: `now()`, note: "ìƒì„±ì¼"]
  CREATED_BY integer [not null, note: "ìƒì„±ì"]
}

// âœ… ì‹ ê·œ: ì±—ë´‡ ëŒ€í™” ë¡œê·¸ í…Œì´ë¸”
Table CHATBOT_LOGS {
  SEQ integer [primary key, increment]
  MARKET_SEQ integer [ref: > M.SEQ, note: "ë§ˆì¼“ SEQ"]
  USER_SEQ integer [ref: > U.SEQ, note: "ìœ ì € SEQ (ë¡œê·¸ì¸ ìœ ì €)"]
  SESSION_ID varchar2 [not null, note: "ì„¸ì…˜ ID"]
  MESSAGE_TYPE varchar2 [not null, note: "USER, BOT"]
  MESSAGE varchar2 [not null, note: "ë©”ì‹œì§€ ë‚´ìš©"]
  INTENT varchar2 [note: "ì¸ì‹ëœ ì˜ë„ (ORDER_INQUIRY, PRODUCT_QUESTION ë“±)"]
  CONFIDENCE decimal(3,2) [note: "ì˜ë„ ì¸ì‹ ì‹ ë¢°ë„"]
  CREATED_AT timestamp [not null, default: `now()`, note: "ìƒì„±ì¼"]
}


// ============================================
// ğŸ“Š í†µê³„ / ë¡œê·¸ í…Œì´ë¸”
// ============================================

// âœ… ì‹ ê·œ: ìƒí’ˆ ì¡°íšŒ ë¡œê·¸ (í†µê³„ìš©)
Table PRODUCT_VIEW_LOGS {
  SEQ integer [primary key, increment]
  PRODUCT_SEQ integer [not null, ref: > P.SEQ, note: "ìƒí’ˆ SEQ"]
  USER_SEQ integer [ref: > U.SEQ, note: "ìœ ì € SEQ (ë¹„ë¡œê·¸ì¸ ì‹œ NULL)"]
  SESSION_ID varchar2 [note: "ì„¸ì…˜ ID"]
  REFERER varchar2 [note: "ìœ ì… ê²½ë¡œ"]
  USER_AGENT varchar2 [note: "ë¸Œë¼ìš°ì € ì •ë³´"]
  CREATED_AT timestamp [not null, default: `now()`, note: "ì¡°íšŒì¼ì‹œ"]
}

// âœ… ì‹ ê·œ: ê²€ìƒ‰ ë¡œê·¸ (ì¸ê¸° ê²€ìƒ‰ì–´/ì¶”ì²œìš©)
Table SEARCH_LOGS {
  SEQ integer [primary key, increment]
  USER_SEQ integer [ref: > U.SEQ, note: "ìœ ì € SEQ"]
  KEYWORD varchar2 [not null, note: "ê²€ìƒ‰ì–´"]
  RESULT_COUNT integer [not null, default: 0, note: "ê²€ìƒ‰ ê²°ê³¼ ìˆ˜"]
  CREATED_AT timestamp [not null, default: `now()`, note: "ê²€ìƒ‰ì¼ì‹œ"]
}
